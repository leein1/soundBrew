<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sound Test with Queue Bar</title>
    <style>
        /* 큐바 스타일 */
        #queueBar {
            display: none; /* 초기에는 숨김 */
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: #282c34;
            color: white;
            padding: 10px;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.3);
            z-index: 1000;
        }

        #queueBar .audio-info {
            display: inline-block;
            margin-right: 20px;
        }

        #queueBar audio {
            vertical-align: middle;
        }

        .song-list button {
            margin: 5px 0;
            cursor: pointer;
        }
    </style>
</head>
<body>
<h1>Sound Test with Queue Bar</h1>

<!-- 음원 목록 -->
<div class="song-list">
    <h2>Song List</h2>
    <button class="playButton" data-file="TestSound-SpaceOddity.mp3">Play: Space Oddity</button>
    <button class="playButton" data-file="TestSound-LifeOnMars.mp3">Play: Life on Mars</button>
</div>

<!-- 큐바 -->
<div id="queueBar">
    <span class="audio-info" id="currentSongInfo">No song playing</span>
    <audio id="audioPlayer" controls>
        Your browser does not support the audio element.
    </audio>
</div>

<script>
    // 모든 playButton 요소에 이벤트 리스너 추가
    document.querySelectorAll(".playButton").forEach(button => {
        button.addEventListener("click", function() {
            const fileName = this.getAttribute("data-file"); // 버튼의 data-file 속성값
            const streamUrl = `/stream/${fileName}`; // 스트리밍 URL 생성
            const queueBar = document.getElementById("queueBar");
            const audioPlayer = document.getElementById("audioPlayer");
            const songInfo = document.getElementById("currentSongInfo");

            // 큐바를 활성화
            queueBar.style.display = "flex";

            // 오디오 정보 업데이트
            songInfo.textContent = `Now Playing: ${fileName}`;

            // 오디오 소스 설정 및 재생
            audioPlayer.src = streamUrl;
            audioPlayer.load();
            audioPlayer.play();
        });
    });
</script>
</body>
</html>